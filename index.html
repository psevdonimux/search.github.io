<html id="hm">
<title>Поисковик</title>
<meta name="viewport" content="user-scalable=no">
<script src="Design.js"></script>
<link rel="stylesheet" href="Index.css">
<link rel="icon" href="image/icon.webp">
<form onsubmit="search(event, this.searching.value);">
 <input name="searching" id="searching">
</form>
<button id="one" onclick="clickOn()">ТЫК</button>
<button id="settings">Настройки</button>
<div id="modal">
<div id="content">
<h1 id="title">Настройки</h1>
<input type="range" id="transparent" min="0" max="10" /> 
<p id="msg">Прозрачность кнопок:<p>
<div id="grid-container">
<p id="msg2">Тема:<p>
<button id="mode" onclick="design.updateMode(); mode();"></button> 
</div>
<p id="msg3">Поисковик:<p>
<select id="optionsMenu">
 <option value="https://yandex.eu/search/touch/?text=">Yandex</option>
 <option value="https://www.google.com/search?q=">Google</option>
 <option value="https://www.bing.com/search?q=">Bing</option>
</select>
<p id="msg4">ChatGPT:<p>
<button id="chatgpt"></button> 
</div>
</div>
<img id="imgc">
<script>
var design = new Design();
design.createModal('modal', 'content', 'settings');
var transparent = document.getElementById('transparent');
var transparentValue = localStorage.getItem('transparent');
var optionsMenu = document.getElementById('optionsMenu');
var content = document.getElementById('content').style;
var chatgpt = document.getElementById('chatgpt');
var imgc = document.getElementById('imgc');
var close = document.getElementById('close');
var settings = document.getElementById('settings');
var msg2 = document.getElementById('msg2');
var elMode = document.getElementById('mode');
var msg3 = document.getElementById('msg3');
var msg4 = document.getElementById('msg4'); 
var chatgpt = document.getElementById('chatgpt'); 
function getWidth(divider, divider2){
 return window.innerWidth < window.innerHeight ? (window.innerWidth / divider) + 'px' : (window.innerWidth / divider2) + 'px';
}
function getHeight(divider, divider2){
 return window.innerWidth < window.innerHeight ? (window.innerHeight / divider) + 'px' : (window.innerHeight / divider2) + 'px';
}
function setWH(id, width, height){
 var element = document.getElementById(id).style;
 element.width = width;
 element.height = height;
}
function search(event, value){
 event.preventDefault();
 location.replace((localStorage.getItem('search') ?? 'https://yandex.eu/search/touch/?text=') + value);
}
function mode(){
 design.cssMode(['hm', 'searching', 'settings', 'mode', 'content', 'title', 'optionsMenu', 'chatgpt']); 
 document.getElementById('mode').innerHTML = design.isDarkMode() ? 'Тёмная' : 'Светлая';
 design.cssMode(['searching'], design.isDarkMode() ? '#FFFFFF' : '#000000', 'transparent');
 design.cssBorder(['searching', 'settings', 'mode', 'optionsMenu', 'chatgpt']);
 design.imageMode(['imgc'], ['chatgpt.webp']);
}
function imageLoad(){
var imageSrc = localStorage.getItem('image');
var image = document.getElementById('hm').style;
 if(imageSrc != ''){
 image.backgroundImage = 'url(' + imageSrc + ')';
 image.backgroundSize = `${window.innerWidth}px ${window.innerHeight}px`;
}
}
function chatGptStatusButton(){
 chatgpt.innerHTML = localStorage.getItem('chatgpt') == 'true' ? 'Включён' : 'Отключён';
}
function modeChatGpt(){
 if(localStorage.getItem('chatgpt') == 'true'){
  setWH('imgc',  getWidth(3, 5), getHeight(6.6, 2.37));  
 }
 else{
  setWH('imgc', '0%', '0%'); 
 }
}
function setOpacity(id, value){
 document.getElementById(id).style.opacity = value;
}
function activate(){
 content.marginTop = getHeight(3, 5);
 setWH('content', getWidth(1.5, 3.4), getHeight(3.1, 1.9));
 /*msg2.style.right = getWidth(1.73, 1.87);
 msg2.style.top = getHeight(2.29, 2.31);
 elMode.style.top = getHeight(2.12, 2.21);
 elMode.style.right = getWidth(2.27, 2.22);*/
//elMode.style.marginRight = '50%';
 setWH('mode',  getWidth(8, 12.5), getHeight(40, 16.9));  
 document.getElementById('grid-container').style.cssText = `
    display: grid;
    grid-template-columns: auto auto; /* Две колонки */
    align-items: center; /* Вертикальное выравнивание по центру */
    margin-top: 13%;
    margin-right: 20%;
 `;
 msg3.style.right = getWidth(2.05, 2.01);
 msg3.style.top = getHeight(1.96, 1.85);
 optionsMenu.style.top = getHeight(1.91, 1.79);
 optionsMenu.style.right = getWidth(2.85, 2.42);
 setWH('optionsMenu',  getWidth(8, 12.5), getHeight(40, 16.9));  
 msg4.style.right = getWidth(1.90, 1.95);
 msg4.style.top = getHeight(1.82, 1.54);
 chatgpt.style.right = getWidth(2.58, 2.33);
 chatgpt.style.top = getHeight(1.73, 1.49);
 setWH('chatgpt',  getWidth(8, 12.5), getHeight(40, 16.9));  
 close.style.fontSize = window.innerWidth < window.innerHeight ? '400%' : '200%';
}
chatgpt.onclick = function(){
 localStorage.setItem('chatgpt', localStorage.getItem('chatgpt') == 'true' ? 'false' : 'true');
 chatGptStatusButton();
 modeChatGpt();
}; 
optionsMenu.onchange = function(event){
 localStorage.setItem('search', event.target.value);
};
imgc.onclick = function(){
 location.replace('https://dev.yqcloud.top/');
};
window.onresize = function(){
 imageLoad();
 modeChatGpt();
 activate();
 const els = document.getElementById('mode');
 const width = els.offsetWidth;
 const height = els.offsetHeight;
 //alert(`Ширина: ${width}px, Высота: ${height}px и телефон: ` + window.innerWidth + ':' + window.innerHeight + 'ширину делим' + (window.innerWidth / width) + ' высоту делим' + (window.innerHeight / height));
}; 
transparent.onchange = function(event){
 var value = event.target.value / 10;
 localStorage.setItem('transparent', value);
 setOpacity('settings', value);
 setOpacity('imgc', value);
};
transparent.value = transparentValue ? transparentValue * 10 : 10;
setOpacity('settings', transparentValue ?? 1);
setOpacity('imgc', transparentValue ?? 1);
optionsMenu.value = localStorage.getItem('search') ?? 'https://yandex.eu/search/touch/?text=';
imageLoad();
chatGptStatusButton();
modeChatGpt();
activate();
mode();
function clickOn(){
var split = prompt().split(' ');
var info = JSON.parse(localStorage.getItem('info') ?? JSON.stringify({}));
var ls = info[split[0]];
if(split[0] == "image" && split[1] != null){
 localStorage.setItem(split[0], split[1]);
 imageLoad();
}
else if(split[0] == "list"){
var arr = [];
var i = 0;
for(let key in info){
 arr[i] = key + ' - ' + info[key];
 i++;
}
 alert(arr.join('\n'));
}
else if(split[0] == 'delete' && split[1] != null && info[split[1]] != null){
 delete info[split[1]];
 localStorage.setItem('info', JSON.stringify(info));
}
else if(split[0] == 'clearAll'){
 localStorage.removeItem('info');
}
else if(split.length == 2){
 info[split[0]] = split[1];
 localStorage.setItem('info', JSON.stringify(info));
}
else if(ls != null){
 location.replace(ls);
}
}
</script>
</html>
