<html id="hm">
<title>Поисковая система</title>
<script src="Design.js"></script>
<link rel="stylesheet" href="Index.css">
<form onsubmit="search(event, this.searching.value);">
 <input name="searching" id="searching">
</form>
<button id="one" onclick="clickOn()">ТЫК</button>
<button id="mode" onclick="modeUpdate()"></button>
<script>
var design = new Design();
function search(event, value){
 event.preventDefault();
 location.replace('https://yandex.eu/search/touch/?text=' + value);
}
function mode(){
 design.cssMode(['hm', 'searching', 'mode']);
 document.getElementById('mode').innerHTML = design.isDarkMode() ? 'Тёмный' : 'Светлый';
 design.cssMode(['searching'], design.isDarkMode() ? '#FFFFFF' : '#000000', 'transparent');
 design.cssBorder(['searching']);
}
function modeUpdate(){
 design.updateMode();
 mode();
}
if(localStorage.getItem('info') == null){
 localStorage.setItem('info', JSON.stringify({}));
}
function imageLoad(){
var imageSrc = localStorage.getItem('image');
var image = document.getElementById('hm').style;
 if(imageSrc != ''){
 image.backgroundImage = 'url(' + imageSrc + ')';
 image.backgroundSize = `${window.innerWidth}px ${window.innerHeight}px`;
}
}
imageLoad();
window.addEventListener('resize', function(){
 imageLoad();
});      
mode();
function clickOn(){
var split = prompt().split(' ');
var info = JSON.parse(localStorage.getItem('info'));
var ls = info[split[0]];
if(split[0] == "image" && split[1] != null){
 localStorage.setItem(split[0], split[1]);
 imageLoad();
}
else if(split[0] == "list"){
var arr = [];
var i = 0;
for(let key in info){
 arr[i] = key + ' - ' + info[key];
 i++;
}
 alert(arr.join('\n'));
}
else if(split[0] == 'delete' && split[1] != null && info[split[1]] != null){
 delete info[split[1]];
 localStorage.setItem('info', JSON.stringify(info));
}
else if(split[0] == 'clearAll'){
 localStorage.removeItem('info');
}
else if(split.length == 2){
 info[split[0]] = split[1];
 localStorage.setItem('info', JSON.stringify(info));
}
else if(ls != null){
 location.replace(ls);
}
}
</script>
</html>
